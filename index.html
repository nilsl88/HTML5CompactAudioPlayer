<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Compact Audio Player</title>
  <link rel="stylesheet" href="./player.css?v=168" />
</head>
<body class="isLoading">
  <a class="skip-link" href="#mainApp">Skip to player</a>
  <div id="statusAnnouncer" role="status" aria-live="polite" class="sr-only"></div>
  <main id="mainApp" class="page">
    <header class="header">
      <div class="titleBlock">
        <div id="episodeTitle" class="title">Audio</div>
        <div id="episodeMeta" class="meta">Loading…</div>
      </div>
    </header>

    <section class="playerCard isExpanded isLoading" aria-label="Audio player">
      <div id="skeletonOverlay" class="skeletonOverlay" aria-hidden="true">
        <div class="skRow skBarRow">
          <div class="sk skCircle"></div>
          <div class="sk skSeek"></div>
        </div>
        <div class="skRow skTimeRow">
          <div class="sk skTime"></div>
          <div class="sk skTime"></div>
        </div>
        <div class="skRow skBtnsRow">
          <div class="sk skIcon"></div>
          <div class="sk skIcon"></div>
          <div class="sk skBtn"></div>
          <div class="sk skBtn"></div>
          <div class="sk skIcon"></div>
          <div class="sk skIcon"></div>
          <div class="sk skIcon"></div>
        </div>
      </div>
      <div class="playerBar">
        <button id="playPauseBtn" class="playBtn" type="button" aria-label="Play">▶︎</button>

        <div class="progressBlock">
          <input id="seek" class="seek" type="range" min="0" max="1000" value="0" step="1" aria-label="Seek" />
          <div class="timeRow" aria-label="Time">
            <span id="timeCur" class="time">0:00</span>
            <span id="timeDur" class="time">0:00</span>
          </div>
        </div>

      </div>

      <div id="coverWrap" class="coverWrap" hidden>
        <img id="coverImg" class="coverImg" alt="" decoding="async" loading="eager" fetchpriority="low" />
      </div>

      <!-- Expanded controls (always shown) -->
      <div id="focusRow" class="focusRow" aria-label="Expanded controls">
        <button id="focusChaptersBtn" class="iconBtn" type="button" aria-haspopup="true" aria-expanded="false" aria-controls="chaptersMenu" title="Chapters">☰︎</button>
        <button id="focusPrevChapterBtn" class="iconBtn" type="button" aria-label="Previous chapter" title="Previous chapter">⏮︎</button>
        <button id="focusSkipBack" class="focusSkipBtn" type="button" aria-label="Skip back"><<15</button>
        <button id="focusSkipForward" class="focusSkipBtn" type="button" aria-label="Skip forward">15>></button>
        <button id="focusNextChapterBtn" class="iconBtn" type="button" aria-label="Next chapter" title="Next chapter">⏭︎</button>
        <button id="sleepBtn" class="iconBtn" type="button" aria-haspopup="true" aria-expanded="false" aria-controls="sleepMenu" title="Sleep timer">☾</button>
        <button id="focusOptionsBtn" class="iconBtn" type="button" aria-haspopup="true" aria-expanded="false" aria-controls="optionsPanel" title="Options">⚙︎</button>
      </div>

      <div id="optionsPanel" class="drawer" hidden>
        <div class="drawerRow" id="episodeRow" hidden>
          <label class="label" for="episodeSelect">Audiobook</label>
          <select id="episodeSelect" class="select"></select>
        </div>

        <div class="drawerRow">
          <label class="label" for="langSelect">Language</label>
          <select id="langSelect" class="select"></select>
        </div>
        <div class="drawerRow">
          <label class="label" for="qualitySelect">Quality</label>
          <select id="qualitySelect" class="select"></select>
        </div>

        <div class="drawerRow drawerRowRange" id="volumeRow">
          <label class="label" for="volumeRange">Volume</label>
          <div class="rangeWrap">
            <input id="volumeRange" class="range" type="range" min="0" max="100" value="100" step="1" aria-label="Volume" />
            <span id="volumeValue" class="rangeValue" aria-live="polite">100%</span>
          </div>
        </div>

        <div class="drawerRow drawerRowRange">
          <label class="label" for="speedRange">Playback speed</label>
          <div class="rangeWrap">
            <input id="speedRange" class="range" type="range" min="0.5" max="2" value="1" step="0.05" aria-label="Playback speed" />
            <span id="speedValue" class="rangeValue" aria-live="polite">1×</span>
          </div>
        </div>

        <div class="drawerRow">
          <label class="label" for="skipSelect">Skip interval</label>
          <select id="skipSelect" class="select">
            <option value="5">5 s</option>
            <option value="10">10 s</option>
            <option value="15">15 s</option>
            <option value="30">30 s</option>
            <option value="60">60 s</option>
          </select>
        </div>

        <div class="drawerDivider" role="separator" aria-hidden="true"></div>

<div class="drawerRow">
          <label class="label" for="themeSelect">Mode</label>
          <select id="themeSelect" class="select">
            <option value="system">System</option>
            <option value="light">Light</option>
            <option value="dark">Dark</option>
          </select>
        </div>
<div class="drawerRow">
          <label class="label" for="fontSizeSelect">Text size</label>
          <select id="fontSizeSelect" class="select">
            <option value="m">Medium</option>
            <option value="s">Small</option>
            <option value="l">Large</option>
          </select>
        </div>
 <div class="drawerRow">
          <label class="label" for="uiLangSelect">Player language</label>
          <select id="uiLangSelect" class="select"></select>
        </div>
<div class="drawerRow drawerRowLink">
  <div class="label"></div>
  <button id="resetBtn" class="textLinkBtn" type="button"><span class="linkText">Reset player</span></button>
</div>
      </div>


      <div id="sleepMenu" class="menu sleepMenu" role="menu" aria-label="Sleep timer" hidden>
        <div class="menuHeader">
          <div class="menuTitle" id="sleepMenuTitle">Sleep timer</div>
          <button id="closeSleepBtn" class="iconBtn" type="button" aria-label="Close" title="Close">✕︎</button>
        </div>
        <div id="sleepList" class="menuList" role="none"></div>
      </div>

      <div id="chaptersMenu" class="menu" role="menu" aria-label="Chapters" hidden>
        <div class="menuHeader">
          <div class="menuTitle">Chapters</div>
          <button id="closeChaptersBtn" class="iconBtn" type="button" aria-label="Close chapters">✕︎</button>
        </div>
        <div id="chaptersList" class="menuList" role="none"></div>
      </div>

      <audio id="audio" preload="metadata" crossorigin="anonymous">
        <track id="chaptersTrack" kind="chapters" />
      </audio>
    </section>

    <!-- Toasts are placed close to the player so feedback isn't far away on tall pages -->
    <div id="toastHost" class="toastHost" aria-live="polite" aria-atomic="true"></div>
  </main>

    <!-- Full-size cover lightbox (keeps audio playing in the background) -->
    <div id="coverLightbox" class="coverLightbox" hidden tabindex="-1" aria-hidden="true">
      <div id="coverLightboxBox" class="coverLightboxBox" role="dialog" aria-modal="true">
        <img id="coverLightboxImg" class="coverLightboxImg" alt="" decoding="async" />
      </div>
    </div>


<!-- First-visit help modal -->
<div id="onboardingModal" class="modalBackdrop" hidden>
  <div class="modal" role="dialog" aria-modal="true" aria-labelledby="onboardingTitle" aria-describedby="onboardingBody">
    <div class="modalHeader">
      <h2 id="onboardingTitle" class="modalTitle">How this player works</h2>
      <button id="onboardingCloseX" class="iconBtn modalClose" type="button" aria-label="Close" title="Close">✕︎</button>
    </div>
    <div id="onboardingBody" class="modalBody"></div>
    <div class="modalFooter">
      <button id="onboardingOk" class="primaryBtn" type="button">Got it</button>
    </div>
  </div>
</div>

<!-- Reset confirmation modal -->
<div id="resetModal" class="modalBackdrop" hidden>
  <div class="modal" role="dialog" aria-modal="true" aria-labelledby="resetTitle" aria-describedby="resetBody">
    <div class="modalHeader">
      <h2 id="resetTitle" class="modalTitle">Reset player</h2>
      <button id="resetCloseX" class="iconBtn modalClose" type="button" aria-label="Close" title="Close">✕︎</button>
    </div>
    <div id="resetBody" class="modalBody"></div>
    <div class="modalFooter modalFooterSplit">
      <button id="resetCancel" class="secondaryBtn" type="button">Cancel</button>
      <button id="resetOk" class="primaryBtn" type="button">Reset</button>
    </div>
  </div>
</div>

  <script src="./i18n.js?v=168" defer></script>
  <script src="./player.js?v=168" defer></script>
</body>
</html>
